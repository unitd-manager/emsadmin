"use strict";(self.webpackChunkmain_bt5=self.webpackChunkmain_bt5||[]).push([[455,1408,1569,1884,1895,2045,2836,3186,3950,4265,4426,4741,5841,5855,6331,6581,6646,6807,7122,8236,8712,9027,9188,9503],{11180:(e,s,t)=>{t.r(s),t.d(s,{default:()=>v});var a=t(89379),r=t(65043),n=t(55613),d=t(28096),i=(t(38421),t(61363),t(76256),t(88637),t(78187),t(58013),t(90425),t(86971)),l=(t(12997),t(77199)),c=t(26581),o=t(49664),h=t(71134),p=t(36762),u=t(86178),x=t.n(u),m=t(70579);const j=e=>{let{editPurchaseOrderLinked:s,setEditPurchaseOrderLinked:t}=e;const{id:l}=(0,i.g)(),[c,o]=(0,r.useState)(),[u,j]=(0,r.useState)(0),[_,g]=(0,r.useState)({amount:0}),[f,v]=(0,r.useState)([]),y=e=>{"amount"===e.target.name&&j(parseInt(e.target.value)),g((0,a.A)((0,a.A)({},_),{},{[e.target.name]:e.target.value}))},A=e=>{p.A.post("/supplier/insert-SupplierReceiptsHistory",e).then((()=>{(0,h.A)("History inserted successfully.")})).catch((()=>{(0,h.A)("Network connection error.")}))},C=(e,s)=>{p.A.post("/supplier/editPartialPurchaseStatus",{purchase_order_id:e,payment_status:s}).then((()=>{(0,h.A)("data inserted successfully.")})).catch((()=>{(0,h.A)("Network connection error.")}))},P=()=>{_.supplier_id=l,_.amount&&_.mode_of_payment&&f.length>0&&(console.log("select",f),p.A.post("/supplier/insert-SupplierReceipt",_).then((e=>{(0,h.A)("data inserted successfully."),(e=>{let s=u;for(let r=0;r<f.length;r++)f[r].remainingAmount<=s?(console.log(parseFloat(s)-f[r].remainingAmount),s=parseFloat(s)-f[r].remainingAmount,f[r].paid=!0,t=f[r].purchase_order_id,a="Paid",p.A.post("/supplier/editPurchaseStatus",{purchase_order_id:t,payment_status:a}).then((()=>{(0,h.A)("data inserted successfully.")})).catch((()=>{(0,h.A)("Network connection error.")})),A({creation_date:x()().format(),modification_date:x()().format(),purchase_order_date:"",invoice_paid_status:"Paid",title:"",installment_id:"",receipt_type:"",related_purchase_order_id:"",gst_amount:"",purchase_order_id:f[r].purchase_order_id,supplier_receipt_id:e,published:"1",flag:"1",created_by:"admin",modified_by:"admin",amount:f[r].remainingAmount})):(f[r].paid=!0,C(f[r].purchase_order_id,"Partially Paid"),A({creation_date:x()().format(),modification_date:x()().format(),purchase_order_date:"",invoice_paid_status:"Partially paid",title:"",installment_id:"",receipt_type:"",related_purchase_order_id:"",gst_amount:"",purchase_order_id:f[r].purchase_order_id,supplier_receipt_id:e,published:"1",flag:"1",created_by:"admin",modified_by:"admin",amount:s}));var t,a})(e.data.data.insertId)})).catch((()=>{})))};let b=[];return(0,r.useEffect)((()=>{p.A.post("/supplier/getMakePayment",{supplier_id:l}).then((e=>{const s=e.data.data;s.forEach((e=>{e.remainingAmount=e.prev_inv_amount-e.prev_amount})),o(s)}))}),[l]),(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(n.aF,{size:"lg",isOpen:s,children:[(0,m.jsx)(d.N9,{}),(0,m.jsxs)(n.rQ,{children:["Create Receipt",(0,m.jsx)(n.$n,{className:"shadow-none",color:"secondary",onClick:()=>{t(!1)},children:"X"})]}),(0,m.jsx)(n.cw,{children:(0,m.jsx)(n.fI,{children:(0,m.jsx)(n.fv,{md:"12",children:(0,m.jsx)(n.Zp,{children:(0,m.jsx)(n.bw,{children:(0,m.jsxs)(n.lV,{children:[c&&c.map((e=>(0,m.jsx)(n.fI,{children:(0,m.jsx)(n.fv,{md:"8",children:(0,m.jsxs)(n.gE,{check:!0,children:[(0,m.jsx)(n.pd,{onChange:s=>{var t;((e,s)=>{const t=s.prev_inv_amount-s.prev_amount;!0===e.target.checked?(j(parseFloat(u)+parseFloat(t)),g((0,a.A)((0,a.A)({},_),{},{amount:(parseFloat(_.amount)+parseFloat(t)).toString()}))):(j(parseFloat(u)-parseFloat(t)),g((0,a.A)((0,a.A)({},_),{},{amount:parseFloat(_.amount)-parseFloat(t)})))})(s,e),t=e,!0===s.target.checked?v([...f,t]):(b=((e,s)=>{const t=e.findIndex((e=>e.po_code===s));return t>-1&&e.splice(t,1),e})(f,t.po_code),v(b))},name:"po_code(prev_inv_amount)",type:"checkbox"}),(0,m.jsxs)("span",{children:[e.po_code,"(",e.prev_inv_amount,") Paid -"," ",e.prev_amount]})]})})}))),(0,m.jsx)("br",{}),(0,m.jsxs)(n.fI,{children:[(0,m.jsx)(n.fv,{md:"8",children:(0,m.jsxs)(n.gE,{children:[(0,m.jsx)(n.JU,{children:"Amount"}),(0,m.jsx)(n.pd,{type:"numbers",onChange:y,value:_&&_.amount,defaultValue:u.toString(),name:"amount"})]})}),(0,m.jsx)(n.fv,{md:"8",children:(0,m.jsxs)(n.gE,{children:[(0,m.jsxs)(n.JU,{children:[" ","Mode Of Payment ",(0,m.jsx)("span",{className:"required",children:"*"})," "]}),(0,m.jsxs)(n.pd,{type:"select",name:"mode_of_payment",onChange:y,children:[(0,m.jsx)("option",{defaultValue:"selected",children:"Please Select"}),(0,m.jsx)("option",{value:"cash",children:"Cash"}),(0,m.jsx)("option",{value:"cheque",children:"Cheque"}),(0,m.jsx)("option",{value:"giro",children:"Giro"})]})]})}),(0,m.jsx)(n.fv,{md:"8",children:(0,m.jsxs)(n.gE,{children:[(0,m.jsx)(n.JU,{children:"Notes"}),(0,m.jsx)(n.pd,{type:"text",onChange:y,defaultValue:_&&_.remarks,name:"remarks"})]})})]})]})})})})})}),(0,m.jsxs)(n.jl,{children:[(0,m.jsxs)(n.$n,{className:"shadow-none",color:"primary",onClick:()=>{P(),t(!1)},children:[" ","Submit"," "]}),(0,m.jsx)(n.$n,{className:"shadow-none",color:"secondary",onClick:()=>{t(!1)},children:"Cancel"})]})]})})};var _=t(51318);function g(e){let{purchaseOrder:s}=e;return(0,m.jsx)(c.default,{title:"Purchase Order Linked",children:(0,m.jsx)(n.lV,{children:(0,m.jsx)("div",{className:"MainDiv",children:(0,m.jsx)("div",{className:"container",children:(0,m.jsxs)(n.XI,{id:"example",className:"display border border-secondary rounded",children:[(0,m.jsx)("thead",{title:"Purchase Order Linked ",children:(0,m.jsx)("tr",{children:[{name:"PO Date"},{name:"PO CODE"},{name:"PO value"},{name:"Balance"},{name:"Payment Status"},{name:"History"}].map((e=>(0,m.jsx)("td",{children:e.name},e.name)))})}),(0,m.jsx)("tbody",{children:s&&s.map((e=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:x()(e.po_date).format("YYYY-MM-DD")}),(0,m.jsx)("td",{children:(0,m.jsx)(_.N_,{to:"/PurchaseOrderEdit/".concat(e.purchase_order_id),children:e.po_code})}),(0,m.jsx)("td",{children:e.po_value}),(0,m.jsx)("td",{children:parseFloat?e.po_value-parseFloat(e.prev_amount):""}),(0,m.jsx)("td",{children:e.payment_status}),(0,m.jsx)("td",{children:(0,m.jsx)(_.N_,{to:"/SupplierHistory/".concat(e.purchase_order_id),children:"View History"})})]},e.supplier_id)))})]})})})})})}function f(e){let{handleInputs:s,supplier:t,allCountries:a,supplierStatus:r,status:d,setEditPurchaseOrderLinked:i}=e;return(0,m.jsxs)(n.lV,{children:[(0,m.jsx)(n.gE,{children:(0,m.jsxs)(c.default,{title:"Supplier Details",children:[(0,m.jsxs)(n.fI,{children:[(0,m.jsx)(n.fv,{md:"4",children:(0,m.jsxs)(n.gE,{children:[(0,m.jsxs)(n.JU,{children:["Name ",(0,m.jsx)("span",{className:"required",children:" *"})]}),(0,m.jsx)(n.pd,{type:"text",onChange:s,value:t&&t.company_name,name:"company_name"})]})}),(0,m.jsx)(n.fv,{md:"4",children:(0,m.jsxs)(n.gE,{children:[(0,m.jsx)(n.JU,{children:"Email"}),(0,m.jsx)(n.pd,{type:"text",onChange:s,value:t&&t.email,name:"email"})]})}),(0,m.jsx)(n.fv,{md:"4",children:(0,m.jsxs)(n.gE,{children:[(0,m.jsx)(n.JU,{children:"Fax"}),(0,m.jsx)(n.pd,{type:"text",onChange:s,value:t&&t.fax,name:"fax"})]})})]}),(0,m.jsxs)(n.fI,{children:[(0,m.jsx)(n.fv,{md:"4",children:(0,m.jsxs)(n.gE,{children:[(0,m.jsx)(n.JU,{children:"Mobile"}),(0,m.jsx)(n.pd,{type:"text",onChange:s,value:t&&t.mobile,name:"mobile"})]})}),(0,m.jsx)(n.fv,{md:"4",children:(0,m.jsxs)(n.gE,{children:[(0,m.jsx)(n.JU,{children:"Status"}),(0,m.jsxs)(n.pd,{type:"select",name:"status",onChange:s,value:t&&t.status,children:[(0,m.jsx)("option",{defaultValue:"selected",children:"Please Select"}),(0,m.jsx)("option",{value:"current",children:"Current"}),(0,m.jsx)("option",{value:"old",children:"Old"}),r&&r.map((e=>(0,m.jsx)("option",{value:e.value,children:e.value})))]})]})}),(0,m.jsx)(n.fv,{md:"4",children:(0,m.jsxs)(n.gE,{children:[(0,m.jsx)(n.JU,{children:"GST NO"}),(0,m.jsx)(n.pd,{type:"text",onChange:s,value:t&&t.gst_no,name:"gst_no"})]})})]}),(0,m.jsxs)(n.fI,{children:[(0,m.jsx)(n.fv,{md:"4",children:(0,m.jsxs)(n.gE,{children:[(0,m.jsx)(n.JU,{children:"Payment Details"}),(0,m.jsx)(n.pd,{type:"text",onChange:s,value:t&&t.payment_details,name:"payment_details"})]})}),(0,m.jsx)(n.fv,{md:"4",children:(0,m.jsxs)(n.gE,{children:[(0,m.jsx)(n.JU,{children:"Terms"}),(0,m.jsx)(n.pd,{type:"text",onChange:s,value:t&&t.terms,name:"terms"})]})}),(0,m.jsx)(n.fv,{md:"4",children:(0,m.jsxs)(n.gE,{children:[(0,m.jsx)(n.JU,{children:"Contact Person"}),(0,m.jsx)(n.pd,{type:"text",onChange:s,value:t&&t.contact_person,name:"contact_person"})]})})]})]})}),(0,m.jsx)(n.gE,{children:(0,m.jsxs)(c.default,{title:"Address",children:[(0,m.jsxs)(n.fI,{children:[(0,m.jsx)(n.fv,{md:"4",children:(0,m.jsxs)(n.gE,{children:[(0,m.jsx)(n.JU,{children:"Address 1"}),(0,m.jsx)(n.pd,{type:"text",onChange:s,value:t&&t.address_flat,name:"address_flat"})]})}),(0,m.jsx)(n.fv,{md:"4",children:(0,m.jsxs)(n.gE,{children:[(0,m.jsx)(n.JU,{children:"Address 2"}),(0,m.jsx)(n.pd,{type:"text",onChange:s,value:t&&t.address_street,name:"address_street"})]})}),(0,m.jsx)(n.fv,{md:"4",children:(0,m.jsxs)(n.gE,{children:[(0,m.jsx)(n.JU,{children:"State/Zip"}),(0,m.jsx)(n.pd,{type:"text",onChange:s,value:t&&t.address_state,name:"address_state"})]})})]}),(0,m.jsxs)(n.fI,{children:[(0,m.jsx)(n.fv,{md:"4",children:(0,m.jsxs)(n.gE,{children:[(0,m.jsx)(n.JU,{children:"Country"}),(0,m.jsxs)(n.pd,{type:"select",name:"address_country",onChange:s,value:t&&t.address_country,children:[(0,m.jsx)("option",{defaultValue:"selected",children:"Please Select"}),a&&a.map((e=>(0,m.jsx)("option",{value:e.country_code,children:e.name})))]})]})}),(0,m.jsx)(n.fv,{md:"4",children:(0,m.jsxs)(n.gE,{children:[(0,m.jsx)(n.JU,{children:"Pin Code"}),(0,m.jsx)(n.pd,{type:"text",onChange:s,value:t&&t.address_po_code,name:"address_po_code"})]})})]}),d&&("Due"===d.payment_status||"Partially Paid"===d.payment_status||"Paid"===d.payment_status)&&(0,m.jsx)(n.fI,{children:(0,m.jsx)("div",{className:"pt-3 mt-3 d-flex align-items-center gap-2",children:(0,m.jsx)(n.$n,{className:"shadow-none",onClick:()=>{i(!0)},color:"primary",children:"Make Supplier Payment"})})})]})})]})}const v=()=>{const[e,s]=(0,r.useState)(),[t,u]=(0,r.useState)(),[x,_]=(0,r.useState)(),[v,y]=(0,r.useState)(!1),[A,C]=(0,r.useState)(),[P,b]=(0,r.useState)(),{id:S}=(0,i.g)(),k=(0,i.Zp)(),N=()=>{""!==e.company_name?p.A.post("/supplier/edit-Supplier",e).then((()=>{(0,h.A)("Record editted successfully","success")})).catch((()=>{(0,h.A)("Unable to edit record.","error")})):(0,h.A)("Please fill all required fields.","error")};(0,r.useEffect)((()=>{p.A.post("/supplier/get-SupplierById",{supplier_id:S}).then((e=>{s(e.data.data[0])})).catch((()=>{(0,h.A)("Supplier Data Not Found","info")}))}),[S]);return(0,r.useEffect)((()=>{p.A.post("/supplier/getPurchaseOrderLinkedss",{supplier_id:S}).then((e=>{u(e.data.data)})).catch((()=>{(0,h.A)("Supplier not found","info")})),p.A.get("/geocountry/getCountry").then((e=>{_(e.data.data)})).catch((()=>{(0,h.A)("Supplier Data Not Found","info")})),p.A.get("/supplier/getValueList").then((e=>{C(e.data.data)})).catch((()=>{(0,h.A)("Status Data Not Found","info")})),p.A.post("/supplier/getStatus",{supplier_id:S}).then((e=>{b(e.data.data[0])})).catch((()=>{(0,h.A)("Unable to edit record.","error")}))}),[]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(l.A,{heading:e&&e.company_name}),(0,m.jsx)(n.lV,{children:(0,m.jsx)(n.gE,{children:(0,m.jsx)(o.A,{children:(0,m.jsxs)(n.fI,{children:[(0,m.jsx)(n.fv,{children:(0,m.jsx)(n.$n,{className:"shadow-none",color:"primary",onClick:()=>{N(),setTimeout((()=>{k("/Supplier")}),1100)},children:"Save"})}),(0,m.jsx)(n.fv,{children:(0,m.jsx)(n.$n,{color:"primary",className:"shadow-none",onClick:()=>{N()},children:"Apply"})}),(0,m.jsx)(n.fv,{children:(0,m.jsx)(n.$n,{color:"dark",className:"shadow-none",onClick:()=>{},children:"Back to List"})})]})})})}),(0,m.jsx)(f,{handleInputs:t=>{s((0,a.A)((0,a.A)({},e),{},{[t.target.name]:t.target.value}))},supplier:e,allCountries:x,supplierStatus:A,status:P,setEditPurchaseOrderLinked:y}),(0,m.jsx)(j,{editPurchaseOrderLinked:v,setEditPurchaseOrderLinked:y}),(0,m.jsxs)(c.default,{children:[(0,m.jsx)(d.N9,{}),(0,m.jsx)(g,{purchaseOrder:t})]})]})}},12997:()=>{},26581:(e,s,t)=>{t.r(s),t.d(s,{default:()=>d});var a=t(55613),r=(t(65043),t(70579));function n(e){let{details:s=null,title:t}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a.ZB,{tag:"h4",className:"border-bottom px-4 py-3 mb-0",children:(0,r.jsxs)(a.fI,{children:[(0,r.jsx)(a.fv,{children:t}),s&&(0,r.jsxs)(a.fv,{children:[(0,r.jsx)(a.fI,{children:(0,r.jsxs)("small",{children:[" Creation: ",s&&s.created_by," ",s&&s.creation_date]})}),(0,r.jsx)(a.fI,{className:"d-flex",children:(0,r.jsxs)("small",{children:[" Modified: ",s&&s.modified_by," ",s&&s.modification_date]})})]})]})})})}const d=e=>{let{children:s,title:t,subtitle:d,creationModificationDate:i}=e;return(0,r.jsxs)(a.Zp,{className:"shadow-none",children:[(0,r.jsx)(n,{details:i,title:t}),(0,r.jsxs)(a.bw,{className:"p-4",children:[(0,r.jsx)(a.jq,{className:"text-muted mb-3",children:d||""}),(0,r.jsx)("div",{children:s})]})]})}},49664:(e,s,t)=>{t.d(s,{A:()=>i});var a=t(55613),r=t(70579);const n={textAlign:"right",marginRight:"10px"},d={outline:"none",border:"none"},i=e=>{let{children:s}=e;return(0,r.jsx)(a.Zp,{className:"shadow-none",children:(0,r.jsx)(a.bw,{style:n,children:(0,r.jsx)("div",{className:"btn btn-space text-nowrap shadow-none outline-none",style:d,children:s})})})}},71134:(e,s,t)=>{t.d(s,{A:()=>r});var a=t(28096);t(92342);const r=(e,s)=>"success"===s?a.oR.success(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):"error"===s?a.oR.error(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):"info"===s?a.oR.info(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):"warning"===s?a.oR.warning(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):(0,a.oR)(e)},77199:(e,s,t)=>{t.d(s,{A:()=>i});var a=t(55613),r=t(86971),n=t(51318),d=t(70579);const i=e=>{const s=(0,r.zy)(),t=s.pathname.split("/")[1],i=s.pathname.split("/")[2];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h4",{children:e.heading}),(0,d.jsxs)(a.Qp,{children:[(0,d.jsx)(a.J5,{to:"/",tag:n.N_,className:"text-decoration-none",children:"Home"}),t?(0,d.jsx)(a.J5,{active:!0,children:t}):"",i?(0,d.jsx)(a.J5,{active:!0,children:i}):""]})]})}},90425:()=>{}}]);
//# sourceMappingURL=3186.58e4c613.chunk.js.map