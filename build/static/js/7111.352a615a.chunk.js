"use strict";(self.webpackChunkmain_bt5=self.webpackChunkmain_bt5||[]).push([[5841,7111,8222],{12997:()=>{},55011:(e,s,a)=>{a.r(s),a.d(s,{default:()=>j});var t=a(89379),r=a(65043),o=a(55613),n=a(91490),d=a(24056),i=a(81045),l=a(22016),c=a(40622),f=a(86506),h=(a(90425),a(12997),a(86178)),m=a.n(h),u=a(28096),p=a(71134),_=a(36762),x=a(1580),g=a(70579);const j=()=>{const[e,s]=(0,r.useState)(),[a,h]=(0,r.useState)(),{loggedInuser:j}=(0,r.useContext)(x.A),[b,v]=(0,r.useState)(),[A,C]=(0,r.useState)({});function N(e){return A[e]}const k=()=>{_.A.post("/attendance/getYesterdayNotes",{staff_id:j.staff_id}).then((e=>{"200"===e.data.status&&v(e.data.data)})).catch((()=>{(0,p.A)("Unable to edit record.","error")}))},y=()=>{_.A.post("/attendance/getStaff",{date:m()().format("DD-MM-YYYY")}).then((e=>{s(e.data.data),function(e){const s={};for(let a=0;a<e.length;a++)s[a]=1;C(s)}(e.data.data),k()})).catch((()=>{(0,p.A)("Unable to edit record.","error")}))},w=(e,s)=>{const a={};a.staff_id=e.staff_id,a.record_date=m()().format("h:mm:ss a"),a.creation_date=m()().format("DD-MM-YYYY"),a.modification_date=m()().format("DD-MM-YYYY"),a.created_by=e.staff_id,a.modified_by=e.staff_id,""!==s&&(a.attendance_id=s),_.A.post("/attendance/insertAttendance",a).then((()=>{(0,p.A)("Attendance inserted successfully.","success"),y()})).catch((()=>{(0,p.A)("Network connection error.","error")}))},Y=(e,s)=>{""===e.target.value?(0,p.A)("Enter valid Notes","warning"):a.attendance_id?(a.notes=e.target.value,a.type=s,_.A.post("/attendance/editNotes",a).then((()=>{k(),(0,p.A)("Task edited successfully.","success")})).catch((()=>{(0,p.A)("Cannot Update Data","error")}))):(0,p.A)("Please Login first","error")},I=e=>{const s=b&&b.filter((s=>s.staff_id===e));return s?s[0]:{notes:"",completed_notes:"",in_progress_notes:""}};return(0,r.useEffect)((()=>{y()}),[]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(u.N9,{}),(0,g.jsx)(o.Zp,{className:"shadow-none",children:(0,g.jsx)(o.lV,{children:(0,g.jsx)(o.bw,{className:"shadow-none",children:(0,g.jsx)(o.fI,{children:e&&e.map(((e,s)=>{var a;return(0,g.jsx)(o.fv,{md:"4",children:(0,g.jsxs)(o.Zp,{className:"border border-gray shadow-none p-1 pt-2",children:[(0,g.jsxs)(o.fI,{className:"border-bottom border-gray p-2",children:[(0,g.jsx)(o.fv,{md:"9",children:(0,g.jsx)("span",{children:(0,g.jsxs)(o.fI,{children:[(0,g.jsx)(o.fv,{md:"3",children:(0,g.jsx)(i.A,{})}),(0,g.jsxs)(o.fv,{md:"9",children:[(0,g.jsx)(o.fI,{children:(0,g.jsx)("b",{children:e.first_name})}),(0,g.jsx)(o.fI,{children:(0,g.jsx)("span",{children:"designation"})})]})]})})}),(0,g.jsx)(o.fv,{md:"3",children:j.staff_id===e.staff_id&&(e.time_in&&!e.leave_time?(0,g.jsx)(o.$n,{color:"primary",className:"shadow-none",size:"sm",onClick:()=>{w(e,e.attendance_id)},children:"Logout"}):e.time_in?(0,g.jsx)(o.$n,{color:"success",className:"shadow-none",size:"sm",children:"Marked"}):(0,g.jsx)(o.$n,{color:"primary",className:"shadow-none",size:"sm",onClick:()=>{w(e,"")},children:"Login"}))})]}),(0,g.jsx)("br",{}),(0,g.jsxs)("div",{className:"text-muted mb-3 card-subtitle",children:[(0,g.jsxs)("p",{children:["Time In:",(0,g.jsxs)("code",{children:[" ",e.time_in?e.time_in:""]})," "]}),(0,g.jsxs)("p",{children:["Time Out:",(0,g.jsxs)("code",{children:[" ",e.leave_time?e.leave_time:""]})," "]})]}),(0,g.jsx)(o.fI,{children:(0,g.jsxs)(l.Ay,{value:null!==(a=N(s))&&void 0!==a?a:1,children:[(0,g.jsx)(n.A,{sx:{borderBottom:1,borderColor:"divider"},className:"col-12",children:(0,g.jsxs)(c.A,{onChange:(e,a)=>((e,s,a)=>{C((0,t.A)((0,t.A)({},A),{},{[a]:s}))})(0,a,s),"aria-label":"lab API tabs example",children:[(0,g.jsx)(d.A,{label:"Pending",value:1,className:"col-4"}),(0,g.jsx)(d.A,{label:"Progress",value:2,className:"col-4"}),(0,g.jsx)(d.A,{label:"Comments",value:3,className:"col-4"})]})}),(0,g.jsx)(f.A,{value:1,children:(0,g.jsx)(o.pd,{onFocus:()=>{h(e)},onBlur:e=>{Y(e,"pending")},type:"textarea",name:"task_pending",defaultValue:I(e.staff_id)&&I(e.staff_id).notes,disabled:j.staff_id!==e.staff_id})}),(0,g.jsx)(f.A,{value:2,children:(0,g.jsx)(o.pd,{onFocus:()=>{h(e)},onBlur:e=>{Y(e,"inprogress")},type:"textarea",name:"task_progress",defaultValue:I(e.staff_id)&&I(e.staff_id).in_progress_notes,disabled:j.staff_id!==e.staff_id})}),(0,g.jsx)(f.A,{value:3,children:(0,g.jsx)(o.pd,{onFocus:()=>{h(e)},onBlur:e=>{Y(e,"completed")},type:"textarea",name:"task_complete",defaultValue:I(e.staff_id)&&I(e.staff_id).completed_notes,disabled:j.staff_id!==e.staff_id})})]})})]},e.staff_id)},e.staff_id)}))})})})})]})}},71134:(e,s,a)=>{a.d(s,{A:()=>r});var t=a(28096);a(92342);const r=(e,s)=>"success"===s?t.oR.success(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):"error"===s?t.oR.error(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):"info"===s?t.oR.info(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):"warning"===s?t.oR.warning(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):(0,t.oR)(e)}}]);
//# sourceMappingURL=7111.352a615a.chunk.js.map